function He(e,i){for(var r=0;r<i.length;r++){const t=i[r];if(typeof t!="string"&&!Array.isArray(t)){for(const n in t)if(n!=="default"&&!(n in e)){const s=Object.getOwnPropertyDescriptor(t,n);s&&Object.defineProperty(e,n,s.get?s:{enumerable:!0,get:()=>t[n]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}function Ye(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ue={exports:{}},fe={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function i(d,m){var h=d.length;d.push(m);e:for(;0<h;){var v=h-1>>>1,S=d[v];if(0<n(S,m))d[v]=m,d[h]=S,h=v;else break e}}function r(d){return d.length===0?null:d[0]}function t(d){if(d.length===0)return null;var m=d[0],h=d.pop();if(h!==m){d[0]=h;e:for(var v=0,S=d.length,D=S>>>1;v<D;){var T=2*(v+1)-1,B=d[T],R=T+1,O=d[R];if(0>n(B,h))R<S&&0>n(O,B)?(d[v]=O,d[R]=h,v=R):(d[v]=B,d[T]=h,v=T);else if(R<S&&0>n(O,h))d[v]=O,d[R]=h,v=R;else break e}}return m}function n(d,m){var h=d.sortIndex-m.sortIndex;return h!==0?h:d.id-m.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();e.unstable_now=function(){return a.now()-o}}var u=[],c=[],p=1,f=null,l=3,g=!1,C=!1,y=!1,W=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function U(d){for(var m=r(c);m!==null;){if(m.callback===null)t(c);else if(m.startTime<=d)t(c),m.sortIndex=m.expirationTime,i(u,m);else break;m=r(c)}}function z(d){if(y=!1,U(d),!C)if(r(u)!==null)C=!0,J(G);else{var m=r(c);m!==null&&V(z,m.startTime-d)}}function G(d,m){C=!1,y&&(y=!1,$(b),b=-1),g=!0;var h=l;try{for(U(m),f=r(u);f!==null&&(!(f.expirationTime>m)||d&&!re());){var v=f.callback;if(typeof v=="function"){f.callback=null,l=f.priorityLevel;var S=v(f.expirationTime<=m);m=e.unstable_now(),typeof S=="function"?f.callback=S:f===r(u)&&t(u),U(m)}else t(u);f=r(u)}if(f!==null)var D=!0;else{var T=r(c);T!==null&&V(z,T.startTime-m),D=!1}return D}finally{f=null,l=h,g=!1}}var M=!1,x=null,b=-1,ee=5,te=-1;function re(){return!(e.unstable_now()-te<ee)}function N(){if(x!==null){var d=e.unstable_now();te=d;var m=!0;try{m=x(!0,d)}finally{m?k():(M=!1,x=null)}}else M=!1}var k;if(typeof w=="function")k=function(){w(N)};else if(typeof MessageChannel<"u"){var ne=new MessageChannel,qe=ne.port2;ne.port1.onmessage=N,k=function(){qe.postMessage(null)}}else k=function(){W(N,0)};function J(d){x=d,M||(M=!0,k())}function V(d,m){b=W(function(){d(e.unstable_now())},m)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(d){d.callback=null},e.unstable_continueExecution=function(){C||g||(C=!0,J(G))},e.unstable_forceFrameRate=function(d){0>d||125<d?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ee=0<d?Math.floor(1e3/d):5},e.unstable_getCurrentPriorityLevel=function(){return l},e.unstable_getFirstCallbackNode=function(){return r(u)},e.unstable_next=function(d){switch(l){case 1:case 2:case 3:var m=3;break;default:m=l}var h=l;l=m;try{return d()}finally{l=h}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(d,m){switch(d){case 1:case 2:case 3:case 4:case 5:break;default:d=3}var h=l;l=d;try{return m()}finally{l=h}},e.unstable_scheduleCallback=function(d,m,h){var v=e.unstable_now();switch(typeof h=="object"&&h!==null?(h=h.delay,h=typeof h=="number"&&0<h?v+h:v):h=v,d){case 1:var S=-1;break;case 2:S=250;break;case 5:S=1073741823;break;case 4:S=1e4;break;default:S=5e3}return S=h+S,d={id:p++,callback:m,priorityLevel:d,startTime:h,expirationTime:S,sortIndex:-1},h>v?(d.sortIndex=h,i(c,d),r(u)===null&&d===r(c)&&(y?($(b),b=-1):y=!0,V(z,h-v))):(d.sortIndex=S,i(u,d),C||g||(C=!0,J(G))),d},e.unstable_shouldYield=re,e.unstable_wrapCallback=function(d){var m=l;return function(){var h=l;l=m;try{return d.apply(this,arguments)}finally{l=h}}}})(fe);ue.exports=fe;var tt=ue.exports;let le=!0,de=!0;function E(e,i,r){const t=e.match(i);return t&&t.length>=r&&parseFloat(t[r],10)}function P(e,i,r){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype,n=t.addEventListener;t.addEventListener=function(a,o){if(a!==i)return n.apply(this,arguments);const u=c=>{const p=r(c);p&&(o.handleEvent?o.handleEvent(p):o(p))};return this._eventMap=this._eventMap||{},this._eventMap[i]||(this._eventMap[i]=new Map),this._eventMap[i].set(o,u),n.apply(this,[a,u])};const s=t.removeEventListener;t.removeEventListener=function(a,o){if(a!==i||!this._eventMap||!this._eventMap[i])return s.apply(this,arguments);if(!this._eventMap[i].has(o))return s.apply(this,arguments);const u=this._eventMap[i].get(o);return this._eventMap[i].delete(o),this._eventMap[i].size===0&&delete this._eventMap[i],Object.keys(this._eventMap).length===0&&delete this._eventMap,s.apply(this,[a,u])},Object.defineProperty(t,"on"+i,{get(){return this["_on"+i]},set(a){this["_on"+i]&&(this.removeEventListener(i,this["_on"+i]),delete this["_on"+i]),a&&this.addEventListener(i,this["_on"+i]=a)},enumerable:!0,configurable:!0})}function Qe(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(le=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function Xe(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(de=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function me(){if(typeof window=="object"){if(le)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function Z(e,i){de&&console.warn(e+" is deprecated, please use "+i+" instead.")}function Ze(e){const i={browser:null,version:null};if(typeof e>"u"||!e.navigator||!e.navigator.userAgent)return i.browser="Not a browser.",i;const{navigator:r}=e;if(r.userAgentData&&r.userAgentData.brands){const t=r.userAgentData.brands.find(n=>n.brand==="Chromium");if(t)return{browser:"chrome",version:parseInt(t.version,10)}}if(r.mozGetUserMedia)i.browser="firefox",i.version=parseInt(E(r.userAgent,/Firefox\/(\d+)\./,1));else if(r.webkitGetUserMedia||e.isSecureContext===!1&&e.webkitRTCPeerConnection)i.browser="chrome",i.version=parseInt(E(r.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else if(e.RTCPeerConnection&&r.userAgent.match(/AppleWebKit\/(\d+)\./))i.browser="safari",i.version=parseInt(E(r.userAgent,/AppleWebKit\/(\d+)\./,1)),i.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype,i._safariVersion=E(r.userAgent,/Version\/(\d+(\.?\d+))/,1);else return i.browser="Not a supported browser.",i;return i}function ie(e){return Object.prototype.toString.call(e)==="[object Object]"}function he(e){return ie(e)?Object.keys(e).reduce(function(i,r){const t=ie(e[r]),n=t?he(e[r]):e[r],s=t&&!Object.keys(n).length;return n===void 0||s?i:Object.assign(i,{[r]:n})},{}):e}function K(e,i,r){!i||r.has(i.id)||(r.set(i.id,i),Object.keys(i).forEach(t=>{t.endsWith("Id")?K(e,e.get(i[t]),r):t.endsWith("Ids")&&i[t].forEach(n=>{K(e,e.get(n),r)})}))}function se(e,i,r){const t=r?"outbound-rtp":"inbound-rtp",n=new Map;if(i===null)return n;const s=[];return e.forEach(a=>{a.type==="track"&&a.trackIdentifier===i.id&&s.push(a)}),s.forEach(a=>{e.forEach(o=>{o.type===t&&o.trackId===a.id&&K(e,o,n)})}),n}const oe=me;function ge(e,i){const r=e&&e.navigator;if(!r.mediaDevices)return;const t=function(o){if(typeof o!="object"||o.mandatory||o.optional)return o;const u={};return Object.keys(o).forEach(c=>{if(c==="require"||c==="advanced"||c==="mediaSource")return;const p=typeof o[c]=="object"?o[c]:{ideal:o[c]};p.exact!==void 0&&typeof p.exact=="number"&&(p.min=p.max=p.exact);const f=function(l,g){return l?l+g.charAt(0).toUpperCase()+g.slice(1):g==="deviceId"?"sourceId":g};if(p.ideal!==void 0){u.optional=u.optional||[];let l={};typeof p.ideal=="number"?(l[f("min",c)]=p.ideal,u.optional.push(l),l={},l[f("max",c)]=p.ideal,u.optional.push(l)):(l[f("",c)]=p.ideal,u.optional.push(l))}p.exact!==void 0&&typeof p.exact!="number"?(u.mandatory=u.mandatory||{},u.mandatory[f("",c)]=p.exact):["min","max"].forEach(l=>{p[l]!==void 0&&(u.mandatory=u.mandatory||{},u.mandatory[f(l,c)]=p[l])})}),o.advanced&&(u.optional=(u.optional||[]).concat(o.advanced)),u},n=function(o,u){if(i.version>=61)return u(o);if(o=JSON.parse(JSON.stringify(o)),o&&typeof o.audio=="object"){const c=function(p,f,l){f in p&&!(l in p)&&(p[l]=p[f],delete p[f])};o=JSON.parse(JSON.stringify(o)),c(o.audio,"autoGainControl","googAutoGainControl"),c(o.audio,"noiseSuppression","googNoiseSuppression"),o.audio=t(o.audio)}if(o&&typeof o.video=="object"){let c=o.video.facingMode;c=c&&(typeof c=="object"?c:{ideal:c});const p=i.version<66;if(c&&(c.exact==="user"||c.exact==="environment"||c.ideal==="user"||c.ideal==="environment")&&!(r.mediaDevices.getSupportedConstraints&&r.mediaDevices.getSupportedConstraints().facingMode&&!p)){delete o.video.facingMode;let f;if(c.exact==="environment"||c.ideal==="environment"?f=["back","rear"]:(c.exact==="user"||c.ideal==="user")&&(f=["front"]),f)return r.mediaDevices.enumerateDevices().then(l=>{l=l.filter(C=>C.kind==="videoinput");let g=l.find(C=>f.some(y=>C.label.toLowerCase().includes(y)));return!g&&l.length&&f.includes("back")&&(g=l[l.length-1]),g&&(o.video.deviceId=c.exact?{exact:g.deviceId}:{ideal:g.deviceId}),o.video=t(o.video),oe("chrome: "+JSON.stringify(o)),u(o)})}o.video=t(o.video)}return oe("chrome: "+JSON.stringify(o)),u(o)},s=function(o){return i.version>=64?o:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[o.name]||o.name,message:o.message,constraint:o.constraint||o.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},a=function(o,u,c){n(o,p=>{r.webkitGetUserMedia(p,u,f=>{c&&c(s(f))})})};if(r.getUserMedia=a.bind(r),r.mediaDevices.getUserMedia){const o=r.mediaDevices.getUserMedia.bind(r.mediaDevices);r.mediaDevices.getUserMedia=function(u){return n(u,c=>o(c).then(p=>{if(c.audio&&!p.getAudioTracks().length||c.video&&!p.getVideoTracks().length)throw p.getTracks().forEach(f=>{f.stop()}),new DOMException("","NotFoundError");return p},p=>Promise.reject(s(p))))}}}function Ce(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function ye(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(r){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=r)},enumerable:!0,configurable:!0});const i=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=t=>{t.stream.addEventListener("addtrack",n=>{let s;e.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(o=>o.track&&o.track.id===n.track.id):s={track:n.track};const a=new Event("track");a.track=n.track,a.receiver=s,a.transceiver={receiver:s},a.streams=[t.stream],this.dispatchEvent(a)}),t.stream.getTracks().forEach(n=>{let s;e.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(o=>o.track&&o.track.id===n.id):s={track:n};const a=new Event("track");a.track=n,a.receiver=s,a.transceiver={receiver:s},a.streams=[t.stream],this.dispatchEvent(a)})},this.addEventListener("addstream",this._ontrackpoly)),i.apply(this,arguments)}}else P(e,"track",i=>(i.transceiver||Object.defineProperty(i,"transceiver",{value:{receiver:i.receiver}}),i))}function ve(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const i=function(n,s){return{track:s,get dtmf(){return this._dtmf===void 0&&(s.kind==="audio"?this._dtmf=n.createDTMFSender(s):this._dtmf=null),this._dtmf},_pc:n}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const n=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(o,u){let c=n.apply(this,arguments);return c||(c=i(this,o),this._senders.push(c)),c};const s=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(o){s.apply(this,arguments);const u=this._senders.indexOf(o);u!==-1&&this._senders.splice(u,1)}}const r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(s){this._senders=this._senders||[],r.apply(this,[s]),s.getTracks().forEach(a=>{this._senders.push(i(this,a))})};const t=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(s){this._senders=this._senders||[],t.apply(this,[s]),s.getTracks().forEach(a=>{const o=this._senders.find(u=>u.track===a);o&&this._senders.splice(this._senders.indexOf(o),1)})}}else if(typeof e=="object"&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const i=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const t=i.apply(this,[]);return t.forEach(n=>n._pc=this),t},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function Se(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const r=e.RTCPeerConnection.prototype.getSenders;r&&(e.RTCPeerConnection.prototype.getSenders=function(){const s=r.apply(this,[]);return s.forEach(a=>a._pc=this),s});const t=e.RTCPeerConnection.prototype.addTrack;t&&(e.RTCPeerConnection.prototype.addTrack=function(){const s=t.apply(this,arguments);return s._pc=this,s}),e.RTCRtpSender.prototype.getStats=function(){const s=this;return this._pc.getStats().then(a=>se(a,s.track,!0))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const r=e.RTCPeerConnection.prototype.getReceivers;r&&(e.RTCPeerConnection.prototype.getReceivers=function(){const n=r.apply(this,[]);return n.forEach(s=>s._pc=this),n}),P(e,"track",t=>(t.receiver._pc=t.srcElement,t)),e.RTCRtpReceiver.prototype.getStats=function(){const n=this;return this._pc.getStats().then(s=>se(s,n.track,!1))}}if(!("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype))return;const i=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const t=arguments[0];let n,s,a;return this.getSenders().forEach(o=>{o.track===t&&(n?a=!0:n=o)}),this.getReceivers().forEach(o=>(o.track===t&&(s?a=!0:s=o),o.track===t)),a||n&&s?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):n?n.getStats():s?s.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return i.apply(this,arguments)}}function Te(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(a=>this._shimmedLocalStreams[a][0])};const i=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(a,o){if(!o)return i.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const u=i.apply(this,arguments);return this._shimmedLocalStreams[o.id]?this._shimmedLocalStreams[o.id].indexOf(u)===-1&&this._shimmedLocalStreams[o.id].push(u):this._shimmedLocalStreams[o.id]=[o,u],u};const r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(a){this._shimmedLocalStreams=this._shimmedLocalStreams||{},a.getTracks().forEach(c=>{if(this.getSenders().find(f=>f.track===c))throw new DOMException("Track already exists.","InvalidAccessError")});const o=this.getSenders();r.apply(this,arguments);const u=this.getSenders().filter(c=>o.indexOf(c)===-1);this._shimmedLocalStreams[a.id]=[a].concat(u)};const t=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(a){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[a.id],t.apply(this,arguments)};const n=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(a){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},a&&Object.keys(this._shimmedLocalStreams).forEach(o=>{const u=this._shimmedLocalStreams[o].indexOf(a);u!==-1&&this._shimmedLocalStreams[o].splice(u,1),this._shimmedLocalStreams[o].length===1&&delete this._shimmedLocalStreams[o]}),n.apply(this,arguments)}}function Re(e,i){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&i.version>=65)return Te(e);const r=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const p=r.apply(this);return this._reverseStreams=this._reverseStreams||{},p.map(f=>this._reverseStreams[f.id])};const t=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(p){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},p.getTracks().forEach(f=>{if(this.getSenders().find(g=>g.track===f))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[p.id]){const f=new e.MediaStream(p.getTracks());this._streams[p.id]=f,this._reverseStreams[f.id]=p,p=f}t.apply(this,[p])};const n=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(p){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},n.apply(this,[this._streams[p.id]||p]),delete this._reverseStreams[this._streams[p.id]?this._streams[p.id].id:p.id],delete this._streams[p.id]},e.RTCPeerConnection.prototype.addTrack=function(p,f){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const l=[].slice.call(arguments,1);if(l.length!==1||!l[0].getTracks().find(y=>y===p))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(y=>y.track===p))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const C=this._streams[f.id];if(C)C.addTrack(p),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const y=new e.MediaStream([p]);this._streams[f.id]=y,this._reverseStreams[y.id]=f,this.addStream(y)}return this.getSenders().find(y=>y.track===p)};function s(c,p){let f=p.sdp;return Object.keys(c._reverseStreams||[]).forEach(l=>{const g=c._reverseStreams[l],C=c._streams[g.id];f=f.replace(new RegExp(C.id,"g"),g.id)}),new RTCSessionDescription({type:p.type,sdp:f})}function a(c,p){let f=p.sdp;return Object.keys(c._reverseStreams||[]).forEach(l=>{const g=c._reverseStreams[l],C=c._streams[g.id];f=f.replace(new RegExp(g.id,"g"),C.id)}),new RTCSessionDescription({type:p.type,sdp:f})}["createOffer","createAnswer"].forEach(function(c){const p=e.RTCPeerConnection.prototype[c],f={[c](){const l=arguments;return arguments.length&&typeof arguments[0]=="function"?p.apply(this,[C=>{const y=s(this,C);l[0].apply(null,[y])},C=>{l[1]&&l[1].apply(null,C)},arguments[2]]):p.apply(this,arguments).then(C=>s(this,C))}};e.RTCPeerConnection.prototype[c]=f[c]});const o=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?o.apply(this,arguments):(arguments[0]=a(this,arguments[0]),o.apply(this,arguments))};const u=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const c=u.get.apply(this);return c.type===""?c:s(this,c)}}),e.RTCPeerConnection.prototype.removeTrack=function(p){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!p._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(p._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let l;Object.keys(this._streams).forEach(g=>{this._streams[g].getTracks().find(y=>p.track===y)&&(l=this._streams[g])}),l&&(l.getTracks().length===1?this.removeStream(this._reverseStreams[l.id]):l.removeTrack(p.track),this.dispatchEvent(new Event("negotiationneeded")))}}function q(e,i){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&i.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(r){const t=e.RTCPeerConnection.prototype[r],n={[r](){return arguments[0]=new(r==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),t.apply(this,arguments)}};e.RTCPeerConnection.prototype[r]=n[r]})}function Pe(e,i){P(e,"negotiationneeded",r=>{const t=r.target;if(!((i.version<72||t.getConfiguration&&t.getConfiguration().sdpSemantics==="plan-b")&&t.signalingState!=="stable"))return r})}const ae=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded:Pe,shimAddTrackRemoveTrack:Re,shimAddTrackRemoveTrackWithNative:Te,shimGetSendersWithDtmf:ve,shimGetUserMedia:ge,shimMediaStream:Ce,shimOnTrack:ye,shimPeerConnection:q,shimSenderReceiverGetStats:Se},Symbol.toStringTag,{value:"Module"}));function _e(e,i){const r=e&&e.navigator,t=e&&e.MediaStreamTrack;if(r.getUserMedia=function(n,s,a){Z("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),r.mediaDevices.getUserMedia(n).then(s,a)},!(i.version>55&&"autoGainControl"in r.mediaDevices.getSupportedConstraints())){const n=function(a,o,u){o in a&&!(u in a)&&(a[u]=a[o],delete a[o])},s=r.mediaDevices.getUserMedia.bind(r.mediaDevices);if(r.mediaDevices.getUserMedia=function(a){return typeof a=="object"&&typeof a.audio=="object"&&(a=JSON.parse(JSON.stringify(a)),n(a.audio,"autoGainControl","mozAutoGainControl"),n(a.audio,"noiseSuppression","mozNoiseSuppression")),s(a)},t&&t.prototype.getSettings){const a=t.prototype.getSettings;t.prototype.getSettings=function(){const o=a.apply(this,arguments);return n(o,"mozAutoGainControl","autoGainControl"),n(o,"mozNoiseSuppression","noiseSuppression"),o}}if(t&&t.prototype.applyConstraints){const a=t.prototype.applyConstraints;t.prototype.applyConstraints=function(o){return this.kind==="audio"&&typeof o=="object"&&(o=JSON.parse(JSON.stringify(o)),n(o,"autoGainControl","mozAutoGainControl"),n(o,"noiseSuppression","mozNoiseSuppression")),a.apply(this,[o])}}}}function We(e,i){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(t){if(!(t&&t.video)){const n=new DOMException("getDisplayMedia without video constraints is undefined");return n.name="NotFoundError",n.code=8,Promise.reject(n)}return t.video===!0?t.video={mediaSource:i}:t.video.mediaSource=i,e.navigator.mediaDevices.getUserMedia(t)})}function be(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function H(e,i){if(typeof e!="object"||!(e.RTCPeerConnection||e.mozRTCPeerConnection))return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),i.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const s=e.RTCPeerConnection.prototype[n],a={[n](){return arguments[0]=new(n==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),s.apply(this,arguments)}};e.RTCPeerConnection.prototype[n]=a[n]});const r={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[s,a,o]=arguments;return t.apply(this,[s||null]).then(u=>{if(i.version<53&&!a)try{u.forEach(c=>{c.type=r[c.type]||c.type})}catch(c){if(c.name!=="TypeError")throw c;u.forEach((p,f)=>{u.set(f,Object.assign({},p,{type:r[p.type]||p.type}))})}return u}).then(a,o)}}function ke(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const i=e.RTCPeerConnection.prototype.getSenders;i&&(e.RTCPeerConnection.prototype.getSenders=function(){const n=i.apply(this,[]);return n.forEach(s=>s._pc=this),n});const r=e.RTCPeerConnection.prototype.addTrack;r&&(e.RTCPeerConnection.prototype.addTrack=function(){const n=r.apply(this,arguments);return n._pc=this,n}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function Ee(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const i=e.RTCPeerConnection.prototype.getReceivers;i&&(e.RTCPeerConnection.prototype.getReceivers=function(){const t=i.apply(this,[]);return t.forEach(n=>n._pc=this),t}),P(e,"track",r=>(r.receiver._pc=r.srcElement,r)),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function Me(e){!e.RTCPeerConnection||"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(r){Z("removeStream","removeTrack"),this.getSenders().forEach(t=>{t.track&&r.getTracks().includes(t.track)&&this.removeTrack(t)})})}function xe(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function De(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const i=e.RTCPeerConnection.prototype.addTransceiver;i&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let t=arguments[1]&&arguments[1].sendEncodings;t===void 0&&(t=[]),t=[...t];const n=t.length>0;n&&t.forEach(a=>{if("rid"in a&&!/^[a-z0-9]{0,16}$/i.test(a.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in a&&!(parseFloat(a.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in a&&!(parseFloat(a.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const s=i.apply(this,arguments);if(n){const{sender:a}=s,o=a.getParameters();(!("encodings"in o)||o.encodings.length===1&&Object.keys(o.encodings[0]).length===0)&&(o.encodings=t,a.sendEncodings=t,this.setParametersPromises.push(a.setParameters(o).then(()=>{delete a.sendEncodings}).catch(()=>{delete a.sendEncodings})))}return s})}function Oe(e){if(!(typeof e=="object"&&e.RTCRtpSender))return;const i=e.RTCRtpSender.prototype.getParameters;i&&(e.RTCRtpSender.prototype.getParameters=function(){const t=i.apply(this,arguments);return"encodings"in t||(t.encodings=[].concat(this.sendEncodings||[{}])),t})}function Ie(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const i=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>i.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):i.apply(this,arguments)}}function Le(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const i=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>i.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):i.apply(this,arguments)}}const ce=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver:De,shimCreateAnswer:Le,shimCreateOffer:Ie,shimGetDisplayMedia:We,shimGetParameters:Oe,shimGetUserMedia:_e,shimOnTrack:be,shimPeerConnection:H,shimRTCDataChannel:xe,shimReceiverGetStats:Ee,shimRemoveStream:Me,shimSenderGetStats:ke},Symbol.toStringTag,{value:"Module"}));function je(e){if(!(typeof e!="object"||!e.RTCPeerConnection)){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const i=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(t){this._localStreams||(this._localStreams=[]),this._localStreams.includes(t)||this._localStreams.push(t),t.getAudioTracks().forEach(n=>i.call(this,n,t)),t.getVideoTracks().forEach(n=>i.call(this,n,t))},e.RTCPeerConnection.prototype.addTrack=function(t,...n){return n&&n.forEach(s=>{this._localStreams?this._localStreams.includes(s)||this._localStreams.push(s):this._localStreams=[s]}),i.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(r){this._localStreams||(this._localStreams=[]);const t=this._localStreams.indexOf(r);if(t===-1)return;this._localStreams.splice(t,1);const n=r.getTracks();this.getSenders().forEach(s=>{n.includes(s.track)&&this.removeTrack(s)})})}}function Ae(e){if(!(typeof e!="object"||!e.RTCPeerConnection)&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(r){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=r),this.addEventListener("track",this._onaddstreampoly=t=>{t.streams.forEach(n=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(n))return;this._remoteStreams.push(n);const s=new Event("addstream");s.stream=n,this.dispatchEvent(s)})})}});const i=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const t=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(n){n.streams.forEach(s=>{if(t._remoteStreams||(t._remoteStreams=[]),t._remoteStreams.indexOf(s)>=0)return;t._remoteStreams.push(s);const a=new Event("addstream");a.stream=s,t.dispatchEvent(a)})}),i.apply(t,arguments)}}}function Fe(e){if(typeof e!="object"||!e.RTCPeerConnection)return;const i=e.RTCPeerConnection.prototype,r=i.createOffer,t=i.createAnswer,n=i.setLocalDescription,s=i.setRemoteDescription,a=i.addIceCandidate;i.createOffer=function(c,p){const f=arguments.length>=2?arguments[2]:arguments[0],l=r.apply(this,[f]);return p?(l.then(c,p),Promise.resolve()):l},i.createAnswer=function(c,p){const f=arguments.length>=2?arguments[2]:arguments[0],l=t.apply(this,[f]);return p?(l.then(c,p),Promise.resolve()):l};let o=function(u,c,p){const f=n.apply(this,[u]);return p?(f.then(c,p),Promise.resolve()):f};i.setLocalDescription=o,o=function(u,c,p){const f=s.apply(this,[u]);return p?(f.then(c,p),Promise.resolve()):f},i.setRemoteDescription=o,o=function(u,c,p){const f=a.apply(this,[u]);return p?(f.then(c,p),Promise.resolve()):f},i.addIceCandidate=o}function Ue(e){const i=e&&e.navigator;if(i.mediaDevices&&i.mediaDevices.getUserMedia){const r=i.mediaDevices,t=r.getUserMedia.bind(r);i.mediaDevices.getUserMedia=n=>t(ze(n))}!i.getUserMedia&&i.mediaDevices&&i.mediaDevices.getUserMedia&&(i.getUserMedia=(function(t,n,s){i.mediaDevices.getUserMedia(t).then(n,s)}).bind(i))}function ze(e){return e&&e.video!==void 0?Object.assign({},e,{video:he(e.video)}):e}function Ge(e){if(!e.RTCPeerConnection)return;const i=e.RTCPeerConnection;e.RTCPeerConnection=function(t,n){if(t&&t.iceServers){const s=[];for(let a=0;a<t.iceServers.length;a++){let o=t.iceServers[a];o.urls===void 0&&o.url?(Z("RTCIceServer.url","RTCIceServer.urls"),o=JSON.parse(JSON.stringify(o)),o.urls=o.url,delete o.url,s.push(o)):s.push(t.iceServers[a])}t.iceServers=s}return new i(t,n)},e.RTCPeerConnection.prototype=i.prototype,"generateCertificate"in i&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get(){return i.generateCertificate}})}function Ne(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Je(e){const i=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(t){if(t){typeof t.offerToReceiveAudio<"u"&&(t.offerToReceiveAudio=!!t.offerToReceiveAudio);const n=this.getTransceivers().find(a=>a.receiver.track.kind==="audio");t.offerToReceiveAudio===!1&&n?n.direction==="sendrecv"?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":n.direction==="recvonly"&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):t.offerToReceiveAudio===!0&&!n&&this.addTransceiver("audio",{direction:"recvonly"}),typeof t.offerToReceiveVideo<"u"&&(t.offerToReceiveVideo=!!t.offerToReceiveVideo);const s=this.getTransceivers().find(a=>a.receiver.track.kind==="video");t.offerToReceiveVideo===!1&&s?s.direction==="sendrecv"?s.setDirection?s.setDirection("sendonly"):s.direction="sendonly":s.direction==="recvonly"&&(s.setDirection?s.setDirection("inactive"):s.direction="inactive"):t.offerToReceiveVideo===!0&&!s&&this.addTransceiver("video",{direction:"recvonly"})}return i.apply(this,arguments)}}function Ve(e){typeof e!="object"||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}const pe=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext:Ve,shimCallbacksAPI:Fe,shimConstraints:ze,shimCreateOfferLegacy:Je,shimGetUserMedia:Ue,shimLocalStreamsAPI:je,shimRTCIceServerUrls:Ge,shimRemoteStreamsAPI:Ae,shimTrackEventTransceiver:Ne},Symbol.toStringTag,{value:"Module"}));var Be={exports:{}};(function(e){const i={};i.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},i.localCName=i.generateIdentifier(),i.splitLines=function(r){return r.trim().split(`
`).map(t=>t.trim())},i.splitSections=function(r){return r.split(`
m=`).map((n,s)=>(s>0?"m="+n:n).trim()+`\r
`)},i.getDescription=function(r){const t=i.splitSections(r);return t&&t[0]},i.getMediaSections=function(r){const t=i.splitSections(r);return t.shift(),t},i.matchPrefix=function(r,t){return i.splitLines(r).filter(n=>n.indexOf(t)===0)},i.parseCandidate=function(r){let t;r.indexOf("a=candidate:")===0?t=r.substring(12).split(" "):t=r.substring(10).split(" ");const n={foundation:t[0],component:{1:"rtp",2:"rtcp"}[t[1]]||t[1],protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]};for(let s=8;s<t.length;s+=2)switch(t[s]){case"raddr":n.relatedAddress=t[s+1];break;case"rport":n.relatedPort=parseInt(t[s+1],10);break;case"tcptype":n.tcpType=t[s+1];break;case"ufrag":n.ufrag=t[s+1],n.usernameFragment=t[s+1];break;default:n[t[s]]===void 0&&(n[t[s]]=t[s+1]);break}return n},i.writeCandidate=function(r){const t=[];t.push(r.foundation);const n=r.component;n==="rtp"?t.push(1):n==="rtcp"?t.push(2):t.push(n),t.push(r.protocol.toUpperCase()),t.push(r.priority),t.push(r.address||r.ip),t.push(r.port);const s=r.type;return t.push("typ"),t.push(s),s!=="host"&&r.relatedAddress&&r.relatedPort&&(t.push("raddr"),t.push(r.relatedAddress),t.push("rport"),t.push(r.relatedPort)),r.tcpType&&r.protocol.toLowerCase()==="tcp"&&(t.push("tcptype"),t.push(r.tcpType)),(r.usernameFragment||r.ufrag)&&(t.push("ufrag"),t.push(r.usernameFragment||r.ufrag)),"candidate:"+t.join(" ")},i.parseIceOptions=function(r){return r.substring(14).split(" ")},i.parseRtpMap=function(r){let t=r.substring(9).split(" ");const n={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=parseInt(t[1],10),n.channels=t.length===3?parseInt(t[2],10):1,n.numChannels=n.channels,n},i.writeRtpMap=function(r){let t=r.payloadType;r.preferredPayloadType!==void 0&&(t=r.preferredPayloadType);const n=r.channels||r.numChannels||1;return"a=rtpmap:"+t+" "+r.name+"/"+r.clockRate+(n!==1?"/"+n:"")+`\r
`},i.parseExtmap=function(r){const t=r.substring(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1],attributes:t.slice(2).join(" ")}},i.writeExtmap=function(r){return"a=extmap:"+(r.id||r.preferredId)+(r.direction&&r.direction!=="sendrecv"?"/"+r.direction:"")+" "+r.uri+(r.attributes?" "+r.attributes:"")+`\r
`},i.parseFmtp=function(r){const t={};let n;const s=r.substring(r.indexOf(" ")+1).split(";");for(let a=0;a<s.length;a++)n=s[a].trim().split("="),t[n[0].trim()]=n[1];return t},i.writeFmtp=function(r){let t="",n=r.payloadType;if(r.preferredPayloadType!==void 0&&(n=r.preferredPayloadType),r.parameters&&Object.keys(r.parameters).length){const s=[];Object.keys(r.parameters).forEach(a=>{r.parameters[a]!==void 0?s.push(a+"="+r.parameters[a]):s.push(a)}),t+="a=fmtp:"+n+" "+s.join(";")+`\r
`}return t},i.parseRtcpFb=function(r){const t=r.substring(r.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},i.writeRtcpFb=function(r){let t="",n=r.payloadType;return r.preferredPayloadType!==void 0&&(n=r.preferredPayloadType),r.rtcpFeedback&&r.rtcpFeedback.length&&r.rtcpFeedback.forEach(s=>{t+="a=rtcp-fb:"+n+" "+s.type+(s.parameter&&s.parameter.length?" "+s.parameter:"")+`\r
`}),t},i.parseSsrcMedia=function(r){const t=r.indexOf(" "),n={ssrc:parseInt(r.substring(7,t),10)},s=r.indexOf(":",t);return s>-1?(n.attribute=r.substring(t+1,s),n.value=r.substring(s+1)):n.attribute=r.substring(t+1),n},i.parseSsrcGroup=function(r){const t=r.substring(13).split(" ");return{semantics:t.shift(),ssrcs:t.map(n=>parseInt(n,10))}},i.getMid=function(r){const t=i.matchPrefix(r,"a=mid:")[0];if(t)return t.substring(6)},i.parseFingerprint=function(r){const t=r.substring(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1].toUpperCase()}},i.getDtlsParameters=function(r,t){return{role:"auto",fingerprints:i.matchPrefix(r+t,"a=fingerprint:").map(i.parseFingerprint)}},i.writeDtlsParameters=function(r,t){let n="a=setup:"+t+`\r
`;return r.fingerprints.forEach(s=>{n+="a=fingerprint:"+s.algorithm+" "+s.value+`\r
`}),n},i.parseCryptoLine=function(r){const t=r.substring(9).split(" ");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},i.writeCryptoLine=function(r){return"a=crypto:"+r.tag+" "+r.cryptoSuite+" "+(typeof r.keyParams=="object"?i.writeCryptoKeyParams(r.keyParams):r.keyParams)+(r.sessionParams?" "+r.sessionParams.join(" "):"")+`\r
`},i.parseCryptoKeyParams=function(r){if(r.indexOf("inline:")!==0)return null;const t=r.substring(7).split("|");return{keyMethod:"inline",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(":")[0]:void 0,mkiLength:t[2]?t[2].split(":")[1]:void 0}},i.writeCryptoKeyParams=function(r){return r.keyMethod+":"+r.keySalt+(r.lifeTime?"|"+r.lifeTime:"")+(r.mkiValue&&r.mkiLength?"|"+r.mkiValue+":"+r.mkiLength:"")},i.getCryptoParameters=function(r,t){return i.matchPrefix(r+t,"a=crypto:").map(i.parseCryptoLine)},i.getIceParameters=function(r,t){const n=i.matchPrefix(r+t,"a=ice-ufrag:")[0],s=i.matchPrefix(r+t,"a=ice-pwd:")[0];return n&&s?{usernameFragment:n.substring(12),password:s.substring(10)}:null},i.writeIceParameters=function(r){let t="a=ice-ufrag:"+r.usernameFragment+`\r
a=ice-pwd:`+r.password+`\r
`;return r.iceLite&&(t+=`a=ice-lite\r
`),t},i.parseRtpParameters=function(r){const t={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},s=i.splitLines(r)[0].split(" ");t.profile=s[2];for(let o=3;o<s.length;o++){const u=s[o],c=i.matchPrefix(r,"a=rtpmap:"+u+" ")[0];if(c){const p=i.parseRtpMap(c),f=i.matchPrefix(r,"a=fmtp:"+u+" ");switch(p.parameters=f.length?i.parseFmtp(f[0]):{},p.rtcpFeedback=i.matchPrefix(r,"a=rtcp-fb:"+u+" ").map(i.parseRtcpFb),t.codecs.push(p),p.name.toUpperCase()){case"RED":case"ULPFEC":t.fecMechanisms.push(p.name.toUpperCase());break}}}i.matchPrefix(r,"a=extmap:").forEach(o=>{t.headerExtensions.push(i.parseExtmap(o))});const a=i.matchPrefix(r,"a=rtcp-fb:* ").map(i.parseRtcpFb);return t.codecs.forEach(o=>{a.forEach(u=>{o.rtcpFeedback.find(p=>p.type===u.type&&p.parameter===u.parameter)||o.rtcpFeedback.push(u)})}),t},i.writeRtpDescription=function(r,t){let n="";n+="m="+r+" ",n+=t.codecs.length>0?"9":"0",n+=" "+(t.profile||"UDP/TLS/RTP/SAVPF")+" ",n+=t.codecs.map(a=>a.preferredPayloadType!==void 0?a.preferredPayloadType:a.payloadType).join(" ")+`\r
`,n+=`c=IN IP4 0.0.0.0\r
`,n+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,t.codecs.forEach(a=>{n+=i.writeRtpMap(a),n+=i.writeFmtp(a),n+=i.writeRtcpFb(a)});let s=0;return t.codecs.forEach(a=>{a.maxptime>s&&(s=a.maxptime)}),s>0&&(n+="a=maxptime:"+s+`\r
`),t.headerExtensions&&t.headerExtensions.forEach(a=>{n+=i.writeExtmap(a)}),n},i.parseRtpEncodingParameters=function(r){const t=[],n=i.parseRtpParameters(r),s=n.fecMechanisms.indexOf("RED")!==-1,a=n.fecMechanisms.indexOf("ULPFEC")!==-1,o=i.matchPrefix(r,"a=ssrc:").map(l=>i.parseSsrcMedia(l)).filter(l=>l.attribute==="cname"),u=o.length>0&&o[0].ssrc;let c;const p=i.matchPrefix(r,"a=ssrc-group:FID").map(l=>l.substring(17).split(" ").map(C=>parseInt(C,10)));p.length>0&&p[0].length>1&&p[0][0]===u&&(c=p[0][1]),n.codecs.forEach(l=>{if(l.name.toUpperCase()==="RTX"&&l.parameters.apt){let g={ssrc:u,codecPayloadType:parseInt(l.parameters.apt,10)};u&&c&&(g.rtx={ssrc:c}),t.push(g),s&&(g=JSON.parse(JSON.stringify(g)),g.fec={ssrc:u,mechanism:a?"red+ulpfec":"red"},t.push(g))}}),t.length===0&&u&&t.push({ssrc:u});let f=i.matchPrefix(r,"b=");return f.length&&(f[0].indexOf("b=TIAS:")===0?f=parseInt(f[0].substring(7),10):f[0].indexOf("b=AS:")===0?f=parseInt(f[0].substring(5),10)*1e3*.95-50*40*8:f=void 0,t.forEach(l=>{l.maxBitrate=f})),t},i.parseRtcpParameters=function(r){const t={},n=i.matchPrefix(r,"a=ssrc:").map(o=>i.parseSsrcMedia(o)).filter(o=>o.attribute==="cname")[0];n&&(t.cname=n.value,t.ssrc=n.ssrc);const s=i.matchPrefix(r,"a=rtcp-rsize");t.reducedSize=s.length>0,t.compound=s.length===0;const a=i.matchPrefix(r,"a=rtcp-mux");return t.mux=a.length>0,t},i.writeRtcpParameters=function(r){let t="";return r.reducedSize&&(t+=`a=rtcp-rsize\r
`),r.mux&&(t+=`a=rtcp-mux\r
`),r.ssrc!==void 0&&r.cname&&(t+="a=ssrc:"+r.ssrc+" cname:"+r.cname+`\r
`),t},i.parseMsid=function(r){let t;const n=i.matchPrefix(r,"a=msid:");if(n.length===1)return t=n[0].substring(7).split(" "),{stream:t[0],track:t[1]};const s=i.matchPrefix(r,"a=ssrc:").map(a=>i.parseSsrcMedia(a)).filter(a=>a.attribute==="msid");if(s.length>0)return t=s[0].value.split(" "),{stream:t[0],track:t[1]}},i.parseSctpDescription=function(r){const t=i.parseMLine(r),n=i.matchPrefix(r,"a=max-message-size:");let s;n.length>0&&(s=parseInt(n[0].substring(19),10)),isNaN(s)&&(s=65536);const a=i.matchPrefix(r,"a=sctp-port:");if(a.length>0)return{port:parseInt(a[0].substring(12),10),protocol:t.fmt,maxMessageSize:s};const o=i.matchPrefix(r,"a=sctpmap:");if(o.length>0){const u=o[0].substring(10).split(" ");return{port:parseInt(u[0],10),protocol:u[1],maxMessageSize:s}}},i.writeSctpDescription=function(r,t){let n=[];return r.protocol!=="DTLS/SCTP"?n=["m="+r.kind+" 9 "+r.protocol+" "+t.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+t.port+`\r
`]:n=["m="+r.kind+" 9 "+r.protocol+" "+t.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+t.port+" "+t.protocol+` 65535\r
`],t.maxMessageSize!==void 0&&n.push("a=max-message-size:"+t.maxMessageSize+`\r
`),n.join("")},i.generateSessionId=function(){return Math.random().toString().substr(2,22)},i.writeSessionBoilerplate=function(r,t,n){let s;const a=t!==void 0?t:2;return r?s=r:s=i.generateSessionId(),`v=0\r
o=`+(n||"thisisadapterortc")+" "+s+" "+a+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},i.getDirection=function(r,t){const n=i.splitLines(r);for(let s=0;s<n.length;s++)switch(n[s]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return n[s].substring(2)}return t?i.getDirection(t):"sendrecv"},i.getKind=function(r){return i.splitLines(r)[0].split(" ")[0].substring(2)},i.isRejected=function(r){return r.split(" ",2)[1]==="0"},i.parseMLine=function(r){const n=i.splitLines(r)[0].substring(2).split(" ");return{kind:n[0],port:parseInt(n[1],10),protocol:n[2],fmt:n.slice(3).join(" ")}},i.parseOLine=function(r){const n=i.matchPrefix(r,"o=")[0].substring(2).split(" ");return{username:n[0],sessionId:n[1],sessionVersion:parseInt(n[2],10),netType:n[3],addressType:n[4],address:n[5]}},i.isValidSDP=function(r){if(typeof r!="string"||r.length===0)return!1;const t=i.splitLines(r);for(let n=0;n<t.length;n++)if(t[n].length<2||t[n].charAt(1)!=="=")return!1;return!0},e.exports=i})(Be);var Ke=Be.exports;const _=Ye(Ke),$e=He({__proto__:null,default:_},[Ke]);function I(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const i=e.RTCIceCandidate;e.RTCIceCandidate=function(t){if(typeof t=="object"&&t.candidate&&t.candidate.indexOf("a=")===0&&(t=JSON.parse(JSON.stringify(t)),t.candidate=t.candidate.substring(2)),t.candidate&&t.candidate.length){const n=new i(t),s=_.parseCandidate(t.candidate);for(const a in s)a in n||Object.defineProperty(n,a,{value:s[a]});return n.toJSON=function(){return{candidate:n.candidate,sdpMid:n.sdpMid,sdpMLineIndex:n.sdpMLineIndex,usernameFragment:n.usernameFragment}},n}return new i(t)},e.RTCIceCandidate.prototype=i.prototype,P(e,"icecandidate",r=>(r.candidate&&Object.defineProperty(r,"candidate",{value:new e.RTCIceCandidate(r.candidate),writable:"false"}),r))}function Y(e){!e.RTCIceCandidate||e.RTCIceCandidate&&"relayProtocol"in e.RTCIceCandidate.prototype||P(e,"icecandidate",i=>{if(i.candidate){const r=_.parseCandidate(i.candidate.candidate);r.type==="relay"&&(i.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[r.priority>>24])}return i})}function L(e,i){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const r=function(o){if(!o||!o.sdp)return!1;const u=_.splitSections(o.sdp);return u.shift(),u.some(c=>{const p=_.parseMLine(c);return p&&p.kind==="application"&&p.protocol.indexOf("SCTP")!==-1})},t=function(o){const u=o.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(u===null||u.length<2)return-1;const c=parseInt(u[1],10);return c!==c?-1:c},n=function(o){let u=65536;return i.browser==="firefox"&&(i.version<57?o===-1?u=16384:u=2147483637:i.version<60?u=i.version===57?65535:65536:u=2147483637),u},s=function(o,u){let c=65536;i.browser==="firefox"&&i.version===57&&(c=65535);const p=_.matchPrefix(o.sdp,"a=max-message-size:");return p.length>0?c=parseInt(p[0].substring(19),10):i.browser==="firefox"&&u!==-1&&(c=2147483637),c},a=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,i.browser==="chrome"&&i.version>=76){const{sdpSemantics:u}=this.getConfiguration();u==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(r(arguments[0])){const u=t(arguments[0]),c=n(u),p=s(arguments[0],u);let f;c===0&&p===0?f=Number.POSITIVE_INFINITY:c===0||p===0?f=Math.max(c,p):f=Math.min(c,p);const l={};Object.defineProperty(l,"maxMessageSize",{get(){return f}}),this._sctp=l}return a.apply(this,arguments)}}function j(e){if(!(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype))return;function i(t,n){const s=t.send;t.send=function(){const o=arguments[0],u=o.length||o.size||o.byteLength;if(t.readyState==="open"&&n.sctp&&u>n.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+n.sctp.maxMessageSize+" bytes)");return s.apply(t,arguments)}}const r=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const n=r.apply(this,arguments);return i(n,this),n},P(e,"datachannel",t=>(i(t.channel,t.target),t))}function Q(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const i=e.RTCPeerConnection.prototype;Object.defineProperty(i,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(i,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(r){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),r&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=r)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(r=>{const t=i[r];i[r]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=n=>{const s=n.target;if(s._lastConnectionState!==s.connectionState){s._lastConnectionState=s.connectionState;const a=new Event("connectionstatechange",n);s.dispatchEvent(a)}return n},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),t.apply(this,arguments)}})}function X(e,i){if(!e.RTCPeerConnection||i.browser==="chrome"&&i.version>=71||i.browser==="safari"&&i._safariVersion>=13.1)return;const r=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(n){if(n&&n.sdp&&n.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const s=n.sdp.split(`
`).filter(a=>a.trim()!=="a=extmap-allow-mixed").join(`
`);e.RTCSessionDescription&&n instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:n.type,sdp:s}):n.sdp=s}return r.apply(this,arguments)}}function A(e,i){if(!(e.RTCPeerConnection&&e.RTCPeerConnection.prototype))return;const r=e.RTCPeerConnection.prototype.addIceCandidate;!r||r.length===0||(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(i.browser==="chrome"&&i.version<78||i.browser==="firefox"&&i.version<68||i.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():r.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function F(e,i){if(!(e.RTCPeerConnection&&e.RTCPeerConnection.prototype))return;const r=e.RTCPeerConnection.prototype.setLocalDescription;!r||r.length===0||(e.RTCPeerConnection.prototype.setLocalDescription=function(){let n=arguments[0]||{};if(typeof n!="object"||n.type&&n.sdp)return r.apply(this,arguments);if(n={type:n.type,sdp:n.sdp},!n.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":n.type="offer";break;default:n.type="answer";break}return n.sdp||n.type!=="offer"&&n.type!=="answer"?r.apply(this,[n]):(n.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(a=>r.apply(this,[a]))})}const we=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed:X,shimAddIceCandidateNullOrEmpty:A,shimConnectionState:Q,shimMaxMessageSize:L,shimParameterlessSetLocalDescription:F,shimRTCIceCandidate:I,shimRTCIceCandidateRelayProtocol:Y,shimSendThrowTypeError:j},Symbol.toStringTag,{value:"Module"}));function et({window:e}={},i={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const r=me,t=Ze(e),n={browserDetails:t,commonShim:we,extractVersion:E,disableLog:Qe,disableWarnings:Xe,sdp:$e};switch(t.browser){case"chrome":if(!ae||!q||!i.shimChrome)return r("Chrome shim is not included in this adapter release."),n;if(t.version===null)return r("Chrome shim can not determine version, not shimming."),n;r("adapter.js shimming chrome."),n.browserShim=ae,A(e,t),F(e),ge(e,t),Ce(e),q(e,t),ye(e),Re(e,t),ve(e),Se(e),Pe(e,t),I(e),Y(e),Q(e),L(e,t),j(e),X(e,t);break;case"firefox":if(!ce||!H||!i.shimFirefox)return r("Firefox shim is not included in this adapter release."),n;r("adapter.js shimming firefox."),n.browserShim=ce,A(e,t),F(e),_e(e,t),H(e,t),be(e),Me(e),ke(e),Ee(e),xe(e),De(e),Oe(e),Ie(e),Le(e),I(e),Q(e),L(e,t),j(e);break;case"safari":if(!pe||!i.shimSafari)return r("Safari shim is not included in this adapter release."),n;r("adapter.js shimming safari."),n.browserShim=pe,A(e,t),F(e),Ge(e),Je(e),Fe(e),je(e),Ae(e),Ne(e),Ue(e),Ve(e),I(e),Y(e),L(e,t),j(e),X(e,t);break;default:r("Unsupported browser!");break}return n}const rt=et({window:typeof window>"u"?void 0:window});export{rt as a,Ye as g,tt as s};
